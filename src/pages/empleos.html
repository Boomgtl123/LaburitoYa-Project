<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Empleos - LaburitoYa</title>
  <link rel="stylesheet" href="../css/home.css" />
  <link rel="stylesheet" href="../css/home-responsive-additions.css" />
  <link rel="stylesheet" href="../css/mobile-avatar-menu.css" />
  <style>
    .empleos-container {
      max-width: 1128px;
      margin: 76px auto 0;
      padding: 24px;
    }

    .empleos-header {
      background: white;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .empleos-header h1 {
      font-size: 28px;
      color: #000000e6;
      margin: 0 0 8px 0;
    }

    .empleos-header p {
      font-size: 14px;
      color: #666666;
      margin: 0;
    }

    .empleos-tabs {
      display: flex;
      gap: 12px;
      background: white;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 24px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      overflow-x: auto;
    }

    .empleo-tab {
      flex: 1;
      min-width: 150px;
      padding: 12px 20px;
      background: #f3f2ef;
      border: 2px solid transparent;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      color: #666666;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .empleo-tab:hover {
      background: #e0e0e0;
    }

    .empleo-tab.active {
      background: #0a66c2;
      color: white;
      border-color: #0a66c2;
    }

    .empleo-tab-icon {
      font-size: 18px;
    }

    .empleos-content {
      display: grid;
      gap: 16px;
    }

    .empleo-card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: all 0.3s;
      cursor: pointer;
      border: 2px solid transparent;
    }

    .empleo-card:hover {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
      border-color: #0a66c2;
      transform: translateY(-2px);
    }

    .empleo-card-header {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
    }

    .empleo-avatar {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      object-fit: cover;
      flex-shrink: 0;
    }

    .empleo-info {
      flex: 1;
    }

    .empleo-empresa {
      font-size: 18px;
      font-weight: 700;
      color: #000000e6;
      margin: 0 0 4px 0;
    }

    .empleo-tipo {
      font-size: 13px;
      color: #0a66c2;
      font-weight: 600;
      margin: 0 0 4px 0;
    }

    .empleo-ubicacion {
      font-size: 13px;
      color: #666666;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .empleo-descripcion {
      font-size: 15px;
      color: #000000e6;
      line-height: 1.6;
      margin-bottom: 16px;
    }

    .empleo-hashtags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 16px;
    }

    .empleo-hashtag {
      padding: 6px 12px;
      background: #e8f5fd;
      color: #0a66c2;
      border-radius: 16px;
      font-size: 12px;
      font-weight: 600;
    }

    .empleo-stats {
      display: flex;
      gap: 20px;
      padding-top: 16px;
      border-top: 1px solid #e0e0e0;
      font-size: 13px;
      color: #666666;
    }

    .empleo-stat {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .empleo-stat-icon {
      font-size: 16px;
    }

    .empleo-badge {
      position: absolute;
      top: 20px;
      right: 20px;
      padding: 6px 12px;
      background: #2e7d32;
      color: white;
      border-radius: 16px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
    }

    .empleo-card {
      position: relative;
    }

    .loading-empleos {
      text-align: center;
      padding: 60px 20px;
      color: #666666;
    }

    .no-empleos {
      text-align: center;
      padding: 60px 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .no-empleos-icon {
      font-size: 64px;
      margin-bottom: 16px;
    }

    .no-empleos h3 {
      font-size: 20px;
      color: #000000e6;
      margin: 0 0 8px 0;
    }

    .no-empleos p {
      font-size: 14px;
      color: #666666;
      margin: 0;
    }

    @media (max-width: 768px) {
      .empleos-container {
        padding: 16px;
        margin-top: 72px;
      }

      .empleos-header h1 {
        font-size: 24px;
      }

      .empleos-tabs {
        padding: 12px;
        gap: 8px;
      }

      .empleo-tab {
        min-width: 120px;
        padding: 10px 16px;
        font-size: 13px;
      }

      .empleo-card {
        padding: 16px;
      }

      .empleo-avatar {
        width: 48px;
        height: 48px;
      }

      .empleo-empresa {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-left">
        <!-- Bot√≥n hamburguesa (solo visible en m√≥vil) -->
        <button class="nav-hamburger" id="navHamburger">‚ãÆ</button>
        
        <div class="nav-btn nav-dropdown" id="navNotificaciones">
          <img src="../../assets/images/notificaciones.png" alt="Notificaciones" class="nav-icon-img" />
          <span class="notification-badge" id="notificationsBadgeIcon" style="display: none;">0</span>
          <div class="dropdown-menu dropdown-notifications">
            <div class="notifications-header">
              <h3>Notificaciones</h3>
              <button class="btn-mark-read" id="btnMarkAllRead">Marcar todas como le√≠das</button>
            </div>
            <div class="notifications-tabs">
              <button class="notif-tab active" data-tab="destacadas">‚≠ê Destacadas</button>
              <button class="notif-tab" data-tab="tendencias">üìà Tendencias</button>
              <button class="notif-tab" data-tab="recientes">üïê Recientes</button>
            </div>
            <div class="notifications-content" id="notificationsContent">
              <div class="loading-notifications">Cargando notificaciones...</div>
            </div>
          </div>
        </div>
        <a href="home.html" class="nav-btn">
          <span>INICIO</span>
        </a>
        <a href="empleos.html" class="nav-btn active" id="navEmpleos">
          <span>EMPLEOS</span>
        </a>
      </div>

      <div class="nav-center">
        <a href="home.html" style="display: flex; align-items: center; text-decoration: none;">
          <img src="../../assets/images/logo.png" alt="LaburitoYa" class="nav-logo" style="cursor: pointer;" />
        </a>
      </div>

      <div class="nav-right">
        <a href="messages.html" class="nav-btn" id="navMensajes">
          <span>MENSAJES</span>
          <span class="notification-badge" id="notificationsBadge" style="display: none;">0</span>
        </a>
        <div class="nav-btn nav-dropdown" id="navInfo">
          <span>+ INFO</span>
          <div class="dropdown-menu dropdown-info">
            <div class="search-box-dropdown">
              <span class="search-icon">üîç</span>
              <input type="text" id="searchInput" placeholder="Buscar empleos, personas..." />
            </div>
            <div class="search-results-dropdown" id="searchResultsDropdown" style="display: none;">
              <!-- Resultados de b√∫squeda aparecer√°n aqu√≠ -->
            </div>
            <div class="dropdown-divider"></div>
            <a href="quienes-somos.html" class="dropdown-item" id="btnQuienesSomos">
              <span>üë•</span> Qui√©nes somos
            </a>
            <a href="politicas.html" class="dropdown-item" id="btnPoliticas">
              <span>üìã</span> Pol√≠ticas
            </a>
            <a href="#" class="dropdown-item" id="btnCerrarSesion">
              <span>üö™</span> Cerrar sesi√≥n
            </a>
          </div>
        </div>
        <div class="nav-btn nav-dropdown nav-avatar-btn" id="navPerfil">
          <img src="https://via.placeholder.com/40" alt="Perfil" class="nav-avatar" id="navAvatar" style="cursor: pointer;" />
          <!-- Dropdown del avatar (visible en m√≥vil) -->
          <div class="dropdown-menu dropdown-avatar">
            <a href="profile.html" class="dropdown-item">
              <span>üë§</span> Ver perfil
            </a>
            <div class="dropdown-divider"></div>
            <div class="search-box-dropdown">
              <span class="search-icon">üîç</span>
              <input type="text" id="searchInputAvatar" placeholder="Buscar empleos, personas..." />
            </div>
            <div class="search-results-dropdown" id="searchResultsDropdownAvatar" style="display: none;"></div>
            <div class="dropdown-divider"></div>
            <a href="home.html" class="dropdown-item">
              <span>üè†</span> Inicio
            </a>
            <a href="empleos.html" class="dropdown-item">
              <span>üíº</span> Empleos
            </a>
            <a href="messages.html" class="dropdown-item">
              <span>üí¨</span> Mensajes
            </a>
            <div class="dropdown-divider"></div>
            <a href="quienes-somos.html" class="dropdown-item">
              <span>üë•</span> Qui√©nes somos
            </a>
            <a href="politicas.html" class="dropdown-item">
              <span>üìã</span> Pol√≠ticas
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item" id="btnCerrarSesionAvatar">
              <span>üö™</span> Cerrar sesi√≥n
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Men√∫ m√≥vil desplegable -->
    <div class="mobile-menu" id="mobileMenu">
      <a href="home.html" class="mobile-menu-item">INICIO</a>
      <a href="empleos.html" class="mobile-menu-item active">EMPLEOS</a>
      <a href="messages.html" class="mobile-menu-item">MENSAJES</a>
      <a href="quienes-somos.html" class="mobile-menu-item">Qui√©nes somos</a>
      <a href="politicas.html" class="mobile-menu-item">Pol√≠ticas</a>
      <a href="#" class="mobile-menu-item" id="mobileLogout">Cerrar sesi√≥n</a>
    </div>
  </nav>

  <!-- Contenido de Empleos -->
  <div class="empleos-container">
    <!-- Header -->
    <div class="empleos-header">
      <h1>üíº Oportunidades Laborales</h1>
      <p>Encuentra las mejores ofertas de trabajo publicadas por empleadores verificados</p>
    </div>

    <!-- Tabs de categor√≠as -->
    <div class="empleos-tabs">
      <button class="empleo-tab active" data-tab="recomendados">
        <span class="empleo-tab-icon">‚≠ê</span>
        <span>M√°s Recomendados</span>
      </button>
      <button class="empleo-tab" data-tab="tendencias">
        <span class="empleo-tab-icon">üìà</span>
        <span>Tendencias</span>
      </button>
      <button class="empleo-tab" data-tab="recientes">
        <span class="empleo-tab-icon">üïê</span>
        <span>Recientes</span>
      </button>
      <button class="empleo-tab" data-tab="zona">
        <span class="empleo-tab-icon">üìç</span>
        <span>Por Zona</span>
      </button>
    </div>

    <!-- Contenido de empleos -->
    <div class="empleos-content" id="empleosContent">
      <div class="loading-empleos">
        <div class="spinner"></div>
        <p>Cargando oportunidades laborales...</p>
      </div>
    </div>
  </div>

  <!-- Bot√≥n flotante de contacto (WhatsApp) -->
  <a href="https://wa.me/5491234567890?text=Hola,%20necesito%20ayuda%20con%20LaburitoYa" 
     class="floating-contact-btn" 
     target="_blank" 
     rel="noopener noreferrer"
     aria-label="Contactar por WhatsApp">
  </a>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
  <!-- Configuraci√≥n de Firebase -->
  <script src="../../config/config.js"></script>
  <script src="../js/auth.js"></script>
  <script src="../js/notifications.js"></script>
  <script src="../js/empleos.js"></script>
  <!-- Scripts opcionales -->
  <script>
    // Cargar m√≥dulos opcionales de forma segura
    const optionalScripts = ['../js/search.js', '../js/notifications-feed.js'];
    optionalScripts.forEach(script => {
      const scriptElement = document.createElement('script');
      scriptElement.src = script;
      scriptElement.onerror = () => console.warn(`‚ö†Ô∏è ${script} no disponible, continuando sin √©l`);
      document.body.appendChild(scriptElement);
    });
    
    // Funcionalidad del men√∫ hamburguesa y avatar
    document.addEventListener('DOMContentLoaded', function() {
      const hamburger = document.getElementById('navHamburger');
      const mobileMenu = document.getElementById('mobileMenu');
      const mobileLogout = document.getElementById('mobileLogout');
      const navPerfil = document.getElementById('navPerfil');
      const navAvatar = document.getElementById('navAvatar');

      // Dropdown del avatar
      if (navPerfil && navAvatar) {
        navAvatar.addEventListener('click', function(e) {
          e.stopPropagation();
          const isMobile = window.innerWidth <= 768;
          
          if (isMobile) {
            // En m√≥vil, toggle dropdown
            navPerfil.classList.toggle('active');
          } else {
            // En desktop, ir a perfil
            window.location.href = 'profile.html';
          }
        });
      }

      // Cerrar sesi√≥n desde el dropdown del avatar
      const btnCerrarSesionAvatar = document.getElementById('btnCerrarSesionAvatar');
      if (btnCerrarSesionAvatar) {
        btnCerrarSesionAvatar.addEventListener('click', function(e) {
          e.preventDefault();
          if (confirm('¬øEst√°s seguro de que deseas cerrar sesi√≥n?')) {
            if (window.auth) {
              window.auth.cerrarSesion();
            } else {
              localStorage.removeItem('currentUser');
              window.location.href = 'login.html';
            }
          }
        });
      }

      // B√∫squeda en el dropdown del avatar
      const searchInputAvatar = document.getElementById('searchInputAvatar');
      if (searchInputAvatar && window.search) {
        searchInputAvatar.addEventListener('input', function() {
          window.search.buscar(this.value, 'searchResultsDropdownAvatar');
        });
      }

      // Inicializar dropdown de +INFO
      const navInfo = document.getElementById('navInfo');
      if (navInfo) {
        navInfo.addEventListener('click', function(e) {
          if (!e.target.closest('.dropdown-menu')) {
            this.classList.toggle('active');
          }
        });
      }
      
      // Inicializar dropdown de notificaciones
      const navNotificaciones = document.getElementById('navNotificaciones');
      if (navNotificaciones) {
        navNotificaciones.addEventListener('click', function(e) {
          if (!e.target.closest('.dropdown-menu')) {
            this.classList.toggle('active');
          }
        });
      }

      // Funcionalidad del men√∫ hamburguesa (solo para desktop)
      if (hamburger && mobileMenu) {
        hamburger.addEventListener('click', function(e) {
          e.stopPropagation();
          mobileMenu.classList.toggle('active');
        });

        // Cerrar men√∫ al hacer clic fuera
        document.addEventListener('click', function(e) {
          if (!mobileMenu.contains(e.target) && !hamburger.contains(e.target)) {
            mobileMenu.classList.remove('active');
          }
        });

        // Cerrar men√∫ al hacer clic en un enlace
        const menuItems = mobileMenu.querySelectorAll('.mobile-menu-item');
        menuItems.forEach(item => {
          item.addEventListener('click', function() {
            mobileMenu.classList.remove('active');
          });
        });
      }

      // Funcionalidad de cerrar sesi√≥n en men√∫ m√≥vil
      if (mobileLogout) {
        mobileLogout.addEventListener('click', function(e) {
          e.preventDefault();
          if (confirm('¬øEst√°s seguro de que deseas cerrar sesi√≥n?')) {
            localStorage.removeItem('currentUser');
            window.location.href = 'login.html';
          }
        });
      }

      // Cerrar dropdowns al hacer clic fuera
      document.addEventListener('click', function(e) {
        if (navInfo && !navInfo.contains(e.target)) {
          navInfo.classList.remove('active');
        }
        if (navNotificaciones && !navNotificaciones.contains(e.target)) {
          navNotificaciones.classList.remove('active');
        }
        if (navPerfil && !navPerfil.contains(e.target)) {
          navPerfil.classList.remove('active');
        }
      });
    });
  </script>
</body>
</html>
